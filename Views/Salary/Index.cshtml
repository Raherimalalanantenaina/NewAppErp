@{
    Layout = "~/Views/Shared/_Layout.cshtml"; // Modifie selon ton projet
}
<div class="employee-header">
        <div class="employee-avatar">JD</div>
        <div class="employee-info">
            <h2>@Model.Employee?.EmployeeName</h2>
            <p>Matricule: @Model.Employee?.Name</p>
        </div>
    </div>
    
    <div class="employee-details">
        <div class="detail-card">
            <h3>Informations Personnelles</h3>
            <div class="detail-row">
                <div class="detail-label">Date de naissance:</div>
                <div class="detail-value">@Model.Employee?.DateOfBirth.ToString("yyyy-MM-dd")</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">Genre:</div>
                <div class="detail-value">@Model.Employee?.Gender</div>
            </div>
        </div>
        
        <div class="detail-card">
            <h3>Informations Professionnelles</h3>
            <div class="detail-row">
                <div class="detail-label">Date d'embauche:</div>
                <div class="detail-value">@Model.Employee?.DateOfJoining.ToString("yyyy-MM-dd")</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">Statut:</div>
                <div class="detail-value" style="color: #1ea672;">@Model.Employee?.Status</div>
            </div>
        </div>
    </div>
    
    <div class="detail-card">
        <div class="salary-filters">
            <h3>Historique des Salaires</h3>
            <form class="form-inline" method="get" asp-action="Index">
                <input type="hidden" name="employeeId" value="@Model.Employee.Name" />
                <div class="filters-left">
                    <input type="number" id="year" name="annee" class="form-control"
                        placeholder="Ex: 2025" min="2000" max="2100" value="@ViewBag.Annee"/>
                    @* <select id="year-select" name="annee">
                        <option value="">Toutes les années</option>
                        @for (int y = DateTime.Now.Year; y >= DateTime.Now.Year - 10; y--)
                        {
                            bool isSelected = (ViewBag.Annee == y);
                            <option value="@y" selected="@(isSelected ? "selected" : null)">@y</option>
                        }
                    </select> *@
                    <select id="month-select" name="mois">
                        <option value="">Tous les mois</option>
                        @for (int m = 1; m <= 12; m++)
                        {
                            bool isSelected = (ViewBag.Mois == m);
                            <option value="@m" selected="@(isSelected ? "selected" : null)">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(m)</option>
                        }
                    </select>
                    <button type="submit" id="apply-filters" style="padding: 8px 15px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer;">
                        Appliquer
                    </button>
                </div>
            </form>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Mois/Année</th>
                    <th class="text-right">Salaire net</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var s in Model.Salaries)
                {
                    <tr>
                        <td>@s.StartDate.ToString("MMMM yyyy")</td>
                        <td class="text-right">@s.NetPay.ToString("N0")</td>
                        <td class="text-center">
                            <a asp-controller="Salary" asp-action="FichePaix" asp-route-name="@s.Name" class="view-btn"><i class="fas fa-eye"></i></a>
                            @* <a asp-controller="Salary" asp-action="ExportPdf" asp-route-name="@s.Name" target="_blank" class="btn btn-sm btn-primary">PDF</a> *@
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        
        <div class="pagination">
            @if ((int)ViewBag.CurrentPage > 1)
            {
                <a asp-action="Index" asp-route-page="@(ViewBag.CurrentPage - 1)"
                asp-route-employeeId="@ViewBag.EmployeeId"
                asp-route-mois="@ViewBag.Mois"
                asp-route-annee="@ViewBag.Annee"
                class="page-btn"><i class="fas fa-chevron-left"></i></a>
            }

            @for (int i = 1; i <= (int)ViewBag.TotalPages; i++)
            {
                <a asp-action="Index" asp-route-page="@i"
                asp-route-employeeId="@ViewBag.EmployeeId"
                asp-route-mois="@ViewBag.Mois"
                asp-route-annee="@ViewBag.Annee"
                class="page-btn @(i == (int)ViewBag.CurrentPage ? "active" : "")">@i</a>
            }

            @if ((int)ViewBag.CurrentPage < (int)ViewBag.TotalPages)
            {
                <a asp-action="Index" asp-route-page="@(ViewBag.CurrentPage + 1)"
                asp-route-employeeId="@ViewBag.EmployeeId"
                asp-route-mois="@ViewBag.Mois"
                asp-route-annee="@ViewBag.Annee"
                class="page-btn"><i class="fas fa-chevron-right"></i></a>
            }
        </div>
    </div>
</div>